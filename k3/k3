k3s Single-Node Kubernetes Setup (Home Lab)
This guide walks you through installing and configuring k3s (a lightweight Kubernetes distribution) on a single Linux machine for your home lab.
Prerequisites
A Linux machine (tested on Ubuntu/Debian)
Root or sudo privileges
1. Install k3s
Run the following command to install k3s:
Apply
Run
-
2. Check k3s Status
Verify that k3s is running:
Apply
Run
k3s
3. Verify the Cluster
Check that your node is part of the cluster:
Apply
Run
nodes
You should see your node listed as Ready.
4. Configure kubectl for Your User
To use kubectl as your regular (non-root) user, follow these steps:
a. Create the .kube directory (if it doesn't exist)
Apply
Run
kube
b. Copy the kubeconfig file
Apply
Run
config
c. (Optional) Set the KUBECONFIG environment variable
Add this to your shell profile (e.g., .bashrc or .zshrc) for convenience:
Apply
Run
config
Or set it for the current session:
Apply
Run
config
5. Test kubectl
Now you can use kubectl as your user:
Apply
Run
nodes
You should see your node listed and in the Ready state.
Troubleshooting
If you see The connection to the server localhost:8080 was refused, ensure you have copied the kubeconfig file and set the correct permissions as shown above.
Make sure the k3s service is running: sudo systemctl status k3s
